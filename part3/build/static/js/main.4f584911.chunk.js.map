{"version":3,"sources":["components/Notification.js","components/PersonForm.js","components/Filter.js","components/Person.js","services/persons.js","App.js","index.js"],"names":["Notification","message","status","className","PersonForm","newName","handleNewName","newNumber","handleNewNumber","handleFormSubmit","onSubmit","value","onChange","type","Filter","search","onChangeHandler","Person","persons","handlePersonDelete","map","person","name","number","onClick","id","window","confirm","handleDeleteClick","BASE_URL","getPersons","a","axios","get","res","data","createPerson","personObj","post","deletePerson","delete","editPerson","put","App","useState","setPersons","personSearch","setPersonSearch","setNewName","setNewNumber","setSearch","notificationObj","setNotificationObj","PersonService","useEffect","handleNotifications","setTimeout","e","preventDefault","duplicate","find","obj","returnedPerson","newPerson","concat","response","error","filter","target","toLowerCase","includes","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4f584911.chunk.js","sourcesContent":["import React from 'react'\r\nimport './Notification.css'\r\nconst Notification = ({message, status}) => {\r\n    return (\r\n        <div className={status}>\r\n           {message} \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification\r\n","const PersonForm = ({\r\n  newName,\r\n  handleNewName,\r\n  newNumber,\r\n  handleNewNumber,\r\n  handleFormSubmit,\r\n}) => {\r\n  return (\r\n    <>\r\n      <form onSubmit={handleFormSubmit}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNewName} />\r\n        </div>\r\n        <div>\r\n          number:\r\n          <input value={newNumber} onChange={handleNewNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","\r\nconst Filter = ({ search, onChangeHandler }) => {\r\n    return (\r\n      <>\r\n        Filter shown with <input value={search} onChange={onChangeHandler} />\r\n      </>\r\n    );\r\n  };\r\n\r\nexport default Filter","const Person = ({ persons, handlePersonDelete }) => {\r\n  const handleDeleteClick = ({ name, id }) => {\r\n    if (window.confirm(`Do you really want to delete ${name}?`)) {\r\n      handlePersonDelete(name, id);\r\n    }\r\n  };\r\n\r\n  return persons.map((person) => (\r\n    <>\r\n      <p key={person.id}>\r\n        {person.name} {person.number}{\" \"}\r\n        <button onClick={() => handleDeleteClick(person)}>delete</button>\r\n      </p>\r\n    </>\r\n  ));\r\n};\r\n\r\nexport default Person;\r\n","import axios from \"axios\";\r\nconst BASE_URL = \"api/persons\";\r\n\r\nconst getPersons = async () => {\r\n  try {\r\n    const res = await axios.get(BASE_URL);\r\n    return res.data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst createPerson = async (personObj) => {\r\n  try {\r\n    const res = await axios.post(BASE_URL, personObj);\r\n    return res.data;\r\n  } catch (error) {\r\n    // return error\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst deletePerson = async (id) => {\r\n  try {\r\n    const res = await axios.delete(`${BASE_URL}/${id}`);\r\n    return res.data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\nconst editPerson = async (personObj) => {\r\n  try {\r\n    const res = await axios.put(`${BASE_URL}/${personObj.id}`, personObj);\r\n    return res.data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport default { getPersons, createPerson, deletePerson, editPerson };\r\n","import React, { useState, useEffect } from \"react\";\nimport Notification from \"./components/Notification\";\nimport PersonForm from \"./components/PersonForm\";\nimport Filter from \"./components/Filter\";\nimport Person from \"./components/Person\";\nimport PersonService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [personSearch, setPersonSearch] = useState([]);\n\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [notificationObj, setNotificationObj] = useState({\n    message: \"\",\n    status: \"\",\n  });\n\n  const getPersons = async () => {\n    setPersons(await PersonService.getPersons());\n  };\n  useEffect(() => {\n    getPersons();\n  }, []);\n\n  const handleNotifications = (message, status) => {\n    setNotificationObj({\n      message,\n      status,\n    });\n    setTimeout(() => {\n      setNotificationObj({\n        message: \"\",\n        status: \"\",\n      });\n    }, 5000);\n  };\n  const handleNewName = (e) => {\n    setNewName(e.target.value);\n  };\n  const handleNewNumber = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleSearchChange = (e) => {\n    setSearch(e.target.value);\n    if (e.target.value) {\n      setPersonSearch(\n        persons.filter((person) => person.name.toLowerCase().includes(search))\n      );\n    } else {\n      setPersonSearch([]);\n    }\n  };\n\n  const handleFormSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const duplicate = persons.find((obj) => obj.name === newName);\n      if (duplicate) {\n        if (\n          window.confirm(\n            `${newName} is already added, replace the old number with a new one?`\n          )\n        ) {\n          const returnedPerson = await PersonService.editPerson({\n            name: newName,\n            number: newNumber,\n            id: duplicate.id,\n          });\n          setPersons(\n            persons.map((person) =>\n              person.id !== duplicate.id ? person : returnedPerson\n            )\n          );\n          handleNotifications(`'${newName}' edited`, \"success\");\n          setNewName(\"\");\n          setNewNumber(\"\");\n        }\n      } else {\n        const newPerson = await PersonService.createPerson({\n          name: newName,\n          number: newNumber,\n        });\n        setPersons(persons.concat(newPerson));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        handleNotifications(`${newName} has been added`, \"success\");\n      }\n    } catch (error) {\n      handleNotifications(`${error.response.data.error}`, \"error\");\n    }\n  };\n\n  const handlePersonDelete = async (name, id) => {\n    try {\n      await PersonService.deletePerson(id);\n      setPersons(persons.filter((person) => person.id !== id));\n      handleNotifications(`'${name}' has removed from server`, \"success\");\n    } catch (error) {\n      handleNotifications(`'${name}' was already removed from server`, \"error\");\n    }\n  };\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {notificationObj.message && notificationObj.status ? (\n        <Notification {...notificationObj} />\n      ) : null}\n      <Filter search={search} onChangeHandler={handleSearchChange} />\n      <h3>Add a new</h3>\n      <PersonForm\n        newName={newName}\n        handleNewName={handleNewName}\n        newNumber={newNumber}\n        handleNewNumber={handleNewNumber}\n        handleFormSubmit={handleFormSubmit}\n      />\n      <h2>Numbers</h2>\n      {search ? (\n        <Person\n          persons={personSearch}\n          handlePersonDelete={handlePersonDelete}\n        />\n      ) : (\n        <Person persons={persons} handlePersonDelete={handlePersonDelete} />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}